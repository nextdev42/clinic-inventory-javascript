<!DOCTYPE html>
<html>
<head>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- ... your head content ... -->
  <style>
    .debug-panel {
      background: #f3f4f6;
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 0.5rem;
      font-family: monospace;
    }
    .debug-title {
      font-weight: bold;
      margin-bottom: 0.5rem;
    }
  </style>
</head>
<body>
  <!-- ... your header ... -->

  <!-- Debug Panel -->
  <div class="debug-panel">
    <div class="debug-title">Debug Information</div>
    <div id="debugOutput">Loading debug data...</div>
  </div>
  <h2>Takwimu za Matumizi ya Dawa</h2>
  <canvas id="medicineChart" width="400" height="200"></canvas>

  <!-- ... your charts ... -->
const chartData = {
  labels: medicineStats.map(stat => stat.dawa),     // e.g., ['Paracetamol', 'Amoxicillin']
  data: medicineStats.map(stat => stat.count)        // e.g., [10, 7]
};

res.render('admin-statistics', {
  ...otherData,
  chartData: JSON.stringify(chartData)
});


<script>
  const chartData = <%- chartData %>;  // This line injects server-side JSON

  const ctx = document.getElementById('medicineChart').getContext('2d');
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: chartData.labels,
      datasets: [{
        label: 'Idadi ya Watumiaji wa Dawa',
        data: chartData.data,
        backgroundColor: 'rgba(75, 192, 192, 0.5)',
        borderColor: 'rgba(75, 192, 192, 1)',
        borderWidth: 1
      }]
    },
    options: {
      scales: {
        y: {
          beginAtZero: true,
          ticks: {
            stepSize: 1
          }
        }
      }
    }
  });
</script>

  
</body>
</html>
